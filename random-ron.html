<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Ron</title>
</head>
<body>
    <blockquote>
        <em id="quote"></em>
    </blockquote>

    <p>
        <button id="get-quote">More Ron</button>
    </p>
</body>

<script>
    // https://ron-swanson-quotes.herokuapp.com/v2/quotes
    // set empty array
    // fetch
        // check data if not inside array
            // if true, add
            // if false, skip

    let quote = document.querySelector('#quote');
    let btn = document.querySelector('#get-quote');
    let temp_quote = '';
    let quotes = [];

    // get last 50 quotes
    const setTempArr = () => {
        let len = quotes.length;
        if (len) {
            return quotes.slice(len-50, len);
        }
        // return quotes;
    }

    // fetch quote
    const fetchQuote = () => {
        fetch('https://ron-swanson-quotes.herokuapp.com/v2/quotes').then((response) => {
            if (response.ok) {
                temp_quote = response.json();
                return temp_quote;
            }
            throw response.status;
        }).catch((err) => {
            quote.textContent = "ERROR";
        });
    }

    const checkQuote = (temp_quote) => {
        let temp_arr_quotes = setTempArr();
        if (!temp_arr_quotes.includes(temp_quote)) {
            fetchQuote.then = (data) => {
                quote.textContent = data;
                quotes.push(data);
            }
        } else {

        }
    }

    btn.addEventListener('click', () => {
        fetchQuote();
        checkQuote(temp_quote);
    });

</script>
</html>